---
/**
 * Pure Sidebar Tags Component - No Styling
 * Multi-purpose foundation ready for any theme
 */

import { getTagsWithPostCounts } from '../../core/blogLogic';

interface Props {
  limit?: number;
}

const { limit = 10 } = Astro.props;

// Get tags using core logic
const tags = await getTagsWithPostCounts();
const topTags = tags.slice(0, limit);
---

{topTags.length > 0 && (
  <div class="theme-card p-6">
    <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary)">Tags</h3>
    <div class="flex flex-wrap gap-2">
      {topTags.map((tag) => (
        <a
          href={`/tags/${tag.data.slug || tag.id}`}
          class="inline-flex items-center gap-1 text-xs px-2 py-1 transition-colors"
          style="background: var(--bg-tertiary); color: var(--text-secondary); border-radius: var(--radius-md); transition: all var(--animation-duration) var(--animation-easing)"
          onmouseover="this.style.background='color-mix(in srgb, var(--color-primary) 10%, transparent)'; this.style.color='var(--text-accent)'"
          onmouseout="this.style.background='var(--bg-tertiary)'; this.style.color='var(--text-secondary)'"
          aria-label={`View all posts tagged with ${tag.data.name} (${tag.postCount} posts)`}
        >
          #{tag.data.name}
          <span style="color: var(--text-muted)">({tag.postCount})</span>
        </a>
      ))}
    </div>
    
    <a 
      href="/tags"
      class="inline-flex items-center gap-1 text-sm font-medium mt-4 transition-colors"
      style="color: var(--text-accent); transition: color var(--animation-duration) var(--animation-easing)"
      onmouseover="this.style.color='var(--color-primary-dark)'"
      onmouseout="this.style.color='var(--text-accent)'"
      aria-label="Browse all blog tags"
    >
      <span>View All Tags</span>
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
      </svg>
    </a>
  </div>
)}