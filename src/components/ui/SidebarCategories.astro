---
/**
 * Pure Sidebar Categories Component - No Styling
 * Multi-purpose foundation ready for any theme
 */

import { getCategoriesWithPostCounts } from '../../core/blogLogic';

interface Props {
  limit?: number;
}

const { limit = 5 } = Astro.props;

// Get categories using core logic
const categories = await getCategoriesWithPostCounts();
const topCategories = categories.slice(0, limit);
---

{topCategories.length > 0 && (
  <div class="theme-card p-6">
    <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary)">Categories</h3>
    <div class="space-y-2">
      {topCategories.map((category) => (
        <a
          href={`/categories/${category.data.slug || category.id}`}
          class="flex items-center justify-between text-sm py-1 transition-colors"
          style="color: var(--text-secondary); transition: color var(--animation-duration) var(--animation-easing)"
          onmouseover="this.style.color='var(--text-accent)'"
          onmouseout="this.style.color='var(--text-secondary)'"
          aria-label={`View all posts in ${category.data.name} category (${category.postCount} posts)`}
        >
          <span class="flex items-center gap-2">
            <span class="w-2 h-2" style="background: var(--color-primary); border-radius: var(--radius-full)"></span>
            {category.data.name}
          </span>
          <span class="text-xs" style="color: var(--text-muted)">({category.postCount})</span>
        </a>
      ))}
    </div>
    <a 
      href="/categories"
      class="inline-flex items-center gap-1 text-sm font-medium mt-4 transition-colors"
      style="color: var(--text-accent); transition: color var(--animation-duration) var(--animation-easing)"
      onmouseover="this.style.color='var(--color-primary-dark)'"
      onmouseout="this.style.color='var(--text-accent)'"
      aria-label="Browse all blog categories"
    >
      <span>View All Categories</span>
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
      </svg>
    </a>
  </div>
)}