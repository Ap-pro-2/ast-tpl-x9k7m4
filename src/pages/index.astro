---
export const prerender = true;

import {
  getSiteSettings,
  generateHomepageSEO,
} from "../core/blogLogic";
import { generateOrganizationSchema } from "../core/seo/schema";
import Schema from "../core/seo/Schema.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import MagazineHero from "../components/layout/MagazineHero.astro";
import MagazineHeroV2 from "../components/layout/MagazineHeroV2.astro";
import Section2 from "../components/layout/Section2.astro";
import Section3Slider from "../components/layout/Section3Slider.astro";
import Section4 from "../components/layout/Section4.astro";
import Section5 from "../components/layout/Section5.astro";

import SimpleBannerAd from "../components/ads/SimpleBannerAd.astro";

// Use core logic for data
const settings = await getSiteSettings();
const seoData = await generateHomepageSEO();

// Generate organization schema for social media and SEO
const organizationSchema = generateOrganizationSchema(settings);
---

<BaseLayout 
  pageTitle={seoData.pageTitle} 
  description={seoData.description}
  ogImage={seoData.ogimage.url}
  ogImageAlt={seoData.ogimage.alt}
  canonicalUrl={seoData.canonicalUrl}
>
  {
    settings.imageDomain && (
      <link rel="preconnect" href={settings.imageDomain} slot="head" />
    )
  }
  <Schema item={organizationSchema} id="organization-schema" slot="head" />

  <MagazineHeroV2 />

  <section class="standalone-ad-section" style="background: var(--bg-primary)">
    <div class="container max-w-7xl">
      <div class="standalone-ad-banner">
        <SimpleBannerAd 
          placement="between-hero-and-content"
          className="homepage-header-ad"
        />
      </div>
    </div>
  </section>

  <Section2 />

  <Section3Slider />

  <Section4 />

</BaseLayout>
